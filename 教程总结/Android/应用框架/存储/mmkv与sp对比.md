
极客时间：android高手
关键要素      SharedPreferences             MMKV
正确性        差                             优
          跨进程和apply机制导致数据丢失       使用mmap和文件锁保证数据完整
时间开销      差                              优
          全量写入、卡顿                    1.使用nmap
                                         2.修改插入文件尾部，无需全量下入
空间开销      差                             良
         使用XML，格式比较冗余            使用ProtocolBuffer，但是增量更新可
                                        能会导致部分冗余
安全        差                             良
      完全明文存储，没有支持加密与          使用ProtocolBuffer，不是完全明文。
       权限校验，不适合存放敏感数据         没有支持加密与权限校验，不适合存放
                                        敏感数据
开发成本   优                             良
       系统支持，非常简单需要引入           单独库，有一定的改造成本
兼容性    优                             优
       支持前后兼容                   支持前后兼容，支持导入
                                     SharedPreferences历史数据，但注意
                                      转换后版本无法回退





https://www.jianshu.com/p/ca1a2129523b
MMKV虽然有trim方法，但是并没有帮你监控虚拟内存的情况，这也是MMKV可以后续优化的地方，如果不注意数据的大小一味的存储，
  会造成虚拟内存爆炸导致应用异常。
SP由于是一口气从磁盘中读取所有的数据，数据过于庞大就会造成SP初始化十分慢，导致后续操作产生ANR。
   //好处避免频繁的io读取，所以适用于小数据量

全量写入
这个问题可以很容易的看到，在writeToFile方法中，是把所有从Xml缓存文件解析到的数据统统保存会缓存文件中，这样就会造成了写入十分缓慢。
而反观MMKV，由于它本身就是支持append模式在后面映射内存末尾继续添加键值对，这样写入速度比起SP快的不是一星半点。

当然也是因为这种机制的问题，SP和MMKV的recover模式从根本的策略上不同。SP由于是全量读写，这样就能完成的保存一份备份文件。
而MMKV一般是内存末尾追加模式以及多进程读写保护的策略，虽然读写很快，但是这也造成了MMKV很难对全文件进行一次备份处理，
只能不断的保证最后一次读写正常，并尝试读取缓存文件中完好数据尽可能恢复完好的数据


对于频繁修改的配置使用 mmap 的确非常合适，使用者不用去理解 apply() 和 commit() 的差别，也不用担心数据的丢失。同时，
我们也不需要每次都提交整个文件，整体性能会有很大提升