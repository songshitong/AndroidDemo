系统设计能力 日志设计，图片框架设计

2022-06-25 多账号系统 账号存在退出登录，缓存的数据， 1 文件是否跟用户绑定，是否用户共用 2 退出登录清空哪些内容，保留哪些内容

并行转串行  
转为串行之后，一种一个命令过长，其他的阻塞了怎么办，要执行放行吗？接收端能否支持多个命令呢 如果只对命令过长的串行化处理呢 每个命令之间是否设置间隔(接收端不能连续接受。。。)

1. 基于回调，手写一个回调完执行下一个
2. 放入队列，链表，数组arralist等
3. 串行线程池




顺序机制
问题  发的顺序，收的顺序不一致   
1 tcp的牛逼之处   顺序调整
2 收到指令查找对应的处理器，处理完成后移除对应的处理器

丢命令的问题   还有一种把指令操作存起来，如果存在丢命令，同样的多个指令处理类就没法处理了

超时设计  tcp重传，ANR埋炸弹
```
   public boolean handleMessage(Message msg) {
        switch (msg.what) {
            case MSG_REQUEST_TIMEOUT:
                //超时后的处理  移除当前指令，开始下一个指令处理
                break;
        }
        return true;
    }

  protected void startRequestTiming() {
        mHandler.sendEmptyMessageDelayed(MSG_REQUEST_TIMEOUT, getTimeoutInMillis());
    }

    protected void stopRequestTiming() {
        mHandler.removeMessages(MSG_REQUEST_TIMEOUT);
    }
        
 protected long getTimeoutInMillis() {
        return 30000;
    }
```