维持ws长连接，心跳不存在就关闭长连接

心跳帧
• 心跳帧可以插在数据帧中传输
 • ping 帧        发起帧，检测心跳
   • opcode=9
   • 可以含有数据 
 • pong 帧        响应帧，进行回应
   • opcode=A
   • 必须与 ping 帧数据相同
   
Chrome的network中  看不到心跳信息    wireshark 查看   

28	132.583982	174.129.224.73	10.24.61.65	WebSocket	68	✓	WebSocket Ping [FIN] 
.... 1001 = Opcode: Ping (9)

30	132.584255	10.24.61.65	174.129.224.73	WebSocket	72	✓	WebSocket Pong [FIN] [MASKED]
.... 1010 = Opcode: Pong (10)


一步

老师视频中有讲，心跳帧是可以穿插在数据帧中的，那么有个疑问，有数据帧发送的时候说明websocket连接是保持的，为什么还要发送心跳帧进行检测呢？
作者回复: 心跳帧可以含有服务健康检查这样的功能


卡卡
心跳，客户端会主动给服务端发ping祯吗？
作者回复: 可以双向进行


一步

这个心跳帧的时间间隔可以自己设置吗？ 刚才用wireshark 观察了一下，时间间隔差不多是30s
作者回复: 就是由Websocket应用端设置的，一般websocket库会提供一个类似heartbeat的方法，让你设置间隔时间



木刻
那其实不需要自己在额外维护心跳了吧
作者回复: 是的，但这只是协议层面。通常自己维护心跳，是涉及业务的




