
窗口滑动示例：MSS 不产生影响，窗口不变    发送文件大小280字节
2  321=241+80
第3步发送的ack，第6步收到
第4步  可用窗口una+wnd-next= 200+241-321=120(第2步的数据)  第四步发送120
    321+120=441
第6步 收到ack 241+80=321
第7步 可用窗口200字节


客户端消息的发送  客户端的角度


服务器消息的发送




ray
老师好，
client和server在tcp segment中已经携带滑动窗口的大小告知对方自己的接收能力，为什么还要在传输MSS给对方？
有滑动窗口的大小不是就可以判断应该如何传递数据了吗？

谢谢老师的解答^^
作者回复: 滑动窗口告诉对方，我的缓冲区还有多少，它的大小可以大于MSS的值。它的目的，是告诉发送方，接收方的处理能力。
MSS是为了防止网络分段。因为每个路由器的分段标准都不同，如果任由它们基于IP分段，网络效率很低，TCP的MSS是为了避免IP分段


阳明
服务器是分开发送数据，先发送header，然后再发送拆分出来的body包吗？？不可以一起发吗
作者回复: http协议是有序字符流格式，接收方必须按照格式来解析，而且，对于可视化展示的WEB对象来说，只要先从header中找到这个文件的解析方式，才能正确展示body

J.Smile
Tcp的mss是将数据打包发送，防止基于ip的mtu分段，所以mss大小小于mtu大小，默认情况下mtu长度=ip头+tcp头+mss.
滑动窗口的作用是为了照顾到接收方的处理能力而给予的提示。
作者回复: mtu是1个局域网中的值，MSS是跨域多个局域网的TCP链路上的值


疯琴
老师，服务器消息发送的第6步，服务器收到客户端ack的80字节后是否可以选择不等窗口足够大到一次发送完再发送而是先发送80字节呢？如果可以这么做，服务器是依据什么来决定是否这么做呢？
作者回复: 从原理上讲，服务器要在低时延和高吞吐量上做权衡。比如，第6步立刻发送80字节，客户端的时延会更低，但服务器会多做一次上下文切换，而且由于固定40字节的TCP、IP头部，有效信息比会更低。因此，当服务器使用了吞吐量优先的设置时（比如CORK、sendfile、NAGLE算法的启用），或者某个内核版本对算法做了相应算法时，会延迟发送；反之则会立即发送。

分清云淡
https://yq.aliyun.com/articles/720202?spm=ata.13261165.0.0.733571cdHp5EHT 这篇通过抓包和流量展示了发送、接收、带宽、rt与传输速度的关系



