计算机网络
链路是从一个节点到相邻节点的一段物理线路(有线或无线)，而中间没有任何其他的交换节点。在进行数据通信时，两台计算机之间的通信路径
往往要经过许多段这样的链路。可见链路只是一条路径的组成部分。
数据链路(data link)则是另一个概念。这是因为当需要在一条线路上传送数据时，除了必须要有一条物理线路外，还必须有一些必要的通信协议
 来控制这些数据的传输。若把实现这些协议的硬件和软件加到链路上，就构成了数据链路。现在常用的方法是使用网络适配器(既有硬件也有软件)
 来实现这些协议。一般的适配器都包括了数据链路层和物理层这两层的功能。(自己：估计这是tcp/ip合并这两层的原因)

数据链路层把网络层交下来的数据构成帧发送到链路上，以及把接收到的帧中数据取出并上交给网络层。

https://juejin.cn/post/6844904155102838791
数据链路层
1、主要功能
 1）、封装成帧    帧的概念是在数据链路层确立的
  什么是数据帧？
     帧是数据链路层数据的基本单位。
     发送端在网络层的一段数据前后添加特定标记形成帧。
     接收端根据前后特定标记识别出帧。
  数据帧结构
    网络层将 IP 数据报传送到数据链路层时，在数据链路层会给 IP 数据报 的前后添加 帧首部与帧尾部。  
    帧首部与尾部都是特定的控制字符，即一些特定的比特流，例如帧首部的 SOH:00000001，帧尾部的EOT:00000100。
  如果数据里面刚好有这些比特流怎么办？
 2）、透明传输
  透明传输是什么？
    1）、计算机领域中非常重要的一个术语。例如对于数据链路层来说，物理层所做的工作就是透明的，物理层只需向外暴露接口即可。  
    2）、一种实际存在的事物但是看起来像不存在一样。  
    3）、即使控制字符在帧数据中，但是要当做不存在一样去处理。
 透明传输的应用
  如果数据里面刚好有这些控制字符该怎么办？
    在该控制字符前面加上一个 ESC 转义字符，如果数据中也包含有 ESC 转义字符时，则可以在前面再加一个 ESC 转义字符。
    而数据链路层的转义字符可以类比与编程语言中的转义字符

 3）、差错监测 
  为什么要进行差错监测？
     因为物理层只管传输比特流，无法控制是否出错。所以数据链路层需要负责差错监测的工作。
  差错监测的方式
  1、奇偶校验码
    在比特流的后面加上 奇偶校验码（1/0）.例如：00110100 => 所有位数和为3，是奇数，在该比特流后面加1。（偶数加0）
      它的局限性在于当比特流中出错两位时，无法检测出错误。
  2、CRC（循环冗余校验码）
   1）、一种根据传输或保存的数据而产生固定位数校验码的方式。
   2）、检测数据传输或保存后可能出现的错误。
   3）、生成的数字计算出来并且附加到数据后面。
   CRC 使用了模 2 除法，即：当最高位为0时，则认为余数不够除，取商为0。
 发送端增加校验码：
   1）、选定一个用于校验的多项式 G(x)（例如：CRC-7、CRC-8 就代表 G(x) 中最高位为8），并在数据尾部添加 r 个0。  
   2）、将添加 r 个0后的数据，使用模 2 除法除以多项式的位串。
   3）、将得到的余数填充在原数据 r 个0的位置得到可校验的位串。
 接收端验证校验码：
   接收数据除以 G(x) 的位串，如果余数为0，则校验成功。
 缺点
   1）、位串的阶数 r 越大，CRC 的错误检测能力越强。（阶数为1时，退化为奇偶校验码） 
   2）、数据链路层只进行数据的检测，不进行纠正，如果检测出错误数据会把该数据丢弃


图解TCP、IP
数据链路层的协议定义了通过通信媒介互连的设备之间传输的规范。通信媒介包括双绞线电缆、同轴电缆、光纤、电波及红外线等介质。此外，各个设备
 之间有时也会通过交换机、网桥、中继器等中转数据。
众所周知，计算机以二进制0、1来表示信息，然而实际的通信媒介之间处理的却是电压的高低、光的闪灭以及电波的强弱等信号。把这些信号与二进制
的0、1进行转换正是物理层的责任。数据链层处理的数据也不是单纯的0、1序列，该层把他们集合为一个叫做"帧"的块，然后再进行传输。



计算机网络 
数据链路层使用的信道
点对点信道  使用一对一的点对点通信方式   PPP
广播信道    使用一对多的广播通信方式

局域网为什么不放在网络层而是数据链路层
局域网虽然是个网络，但我们并不把局域网放在网络层讨论，这是因为在网络层要讨论的问题是多个网络互连的问题，是讨论分组是怎样从一个网络，通过路由器
  转发到另一个网络。数据链路层研究的是在同一个局域网中，分组怎样从一台主机传送到另一台主机，但并不经过路由器转发。从整个互联网来看，
  局域网仍属于数据链路层的范围。

数据链路层增加了差错检测，是可靠传输吗      //todo 每层都有校验码，对自己的内容进行校验？？
 在数据链路层若仅仅使用循环冗余检验CRC差错检测技术，则只能做到对帧的无差错接受，即："凡是接收端数据链路层接受的帧，我们能都能以
  非常接近于1的概率认为这些帧在传输过程中没有产生差错"。接收端丢弃的帧虽然曾受到了，但最终还是因为有差错被丢弃，即没有接受。以上所述的
  可以近似的表述为(通常都是这样认为)"凡是接收端数据链路层接受的帧均无差错"。
 请注意，我们现在并没有要求数据链路层向网络层提供"可靠传输"的服务。所谓"可靠传输"就是：数据链路层的发送端发送什么，在接收端就收到什么。
 传输差错可以分为两大类：一类就是最基本的比特差错，另一类更复杂一些，就是收到帧没有出现比特差错，但却出现了帧丢失，帧重复或帧失序
   帧失序  后发送的帧反而先到达了接收端，这与一般数据链路层的传输概念不一样，tcp层具体讨论帧相关的差错
 总之，我们应当明确，"无比特差错"与"无传输差错"并不是同样的概念.在数据链路层使用CRC校验，能够实现无比特差错的传输，但这还不是可靠传输。
 我们知道，过去OSI的观点是：必须让数据链路层向上提供可靠传输。因此在CRC检错的基础上，增加了帧编号、确认和重传机制。收到正确的帧就要
   向发送端发送确认。发送端在一定的期限内若没收到对方的确认，就认为出现了差错，因而就进行重传，直到收到对方的确认位置。这种方法在历史上
   曾经起到很好的作用。但现在的通信线路的质量已经大大提高了，由通信链路质量不好引起差错的概率已经大大降低。因此，现在互联网就才取了区别
   对待的方法。
   对于通信质量良好的有线传输链路，数据链路层协议不使用确认和重传机制，即不要求数据链路层向上提供可靠传输的服务。如果在数据链路层
     传输数据时出现了差错并且需要进行改正，那么改正差错的任务就由上层协议(例如，运输层的TCP协议)来完成。
   对于通信质量较差的无线传输链路，数据链路层协议使用确认和重传机制，数据链路层向上提供可靠传输的服务(第9章 无线网络和移动网络)
   实践证明，这样做可以提高通信效率。